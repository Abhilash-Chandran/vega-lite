{"version":3,"file":"assemble.test.js","sourceRoot":"","sources":["../../../../test/compile/legend/assemble.test.ts"],"names":[],"mappings":"AAAA,8BAA8B;AAE9B,OAAO,EAAC,uBAAuB,EAAC,MAAM,YAAY,CAAC;AAEnD,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAC/B,EAAE,CAAC,wDAAwD,EAAE,GAAG,EAAE;QAChE,MAAM,KAAK,GAAG,uBAAuB,CAAC;YACpC,OAAO,EAAE,iDAAiD;YAC1D,WAAW,EAAE,yDAAyD;YACtE,IAAI,EAAE,EAAC,GAAG,EAAE,gBAAgB,EAAC;YAC7B,IAAI,EAAE,OAAO;YACb,QAAQ,EAAE;gBACR,CAAC,EAAE,EAAC,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,cAAc,EAAC;gBAC9C,CAAC,EAAE,EAAC,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAE,cAAc,EAAC;gBACpD,KAAK,EAAE,EAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAC;gBACzC,KAAK,EAAE,EAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAC;aAC1C;SACF,CAAC,CAAC;QACH,KAAK,CAAC,YAAY,EAAE,CAAC;QAErB,MAAM,OAAO,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;QACxC,MAAM,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAEhC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC3C,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC3C,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IAC5C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uEAAuE,EAAE,GAAG,EAAE;QAC/E,MAAM,KAAK,GAAG,uBAAuB,CAAC;YACpC,IAAI,EAAE,EAAC,MAAM,EAAE,CAAC,EAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAC,EAAE,EAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAC,CAAC,EAAC;YAClD,IAAI,EAAE,KAAK;YACX,QAAQ,EAAE;gBACR,CAAC,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,SAAS,EAAC;gBAChC,CAAC,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,cAAc,EAAC;gBACrC,KAAK,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,cAAc,EAAC;gBACzC,IAAI,EAAE,EAAC,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,cAAc,EAAC;aACzC;SACF,CAAC,CAAC;QAEH,KAAK,CAAC,YAAY,EAAE,CAAC;QAErB,MAAM,OAAO,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;QACxC,MAAM,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAChC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACtC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACzC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QACxC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAChE,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* tslint:disable:quotemark */\n\nimport {parseUnitModelWithScale} from '../../util';\n\ndescribe('legend/assemble', () => {\n  it('merges legend of the same field with the default type.', () => {\n    const model = parseUnitModelWithScale({\n      $schema: 'https://vega.github.io/schema/vega-lite/v3.json',\n      description: 'A scatterplot showing horsepower and miles per gallons.',\n      data: {url: 'data/cars.json'},\n      mark: 'point',\n      encoding: {\n        x: {field: 'Horsepower', type: 'quantitative'},\n        y: {field: 'Miles_per_Gallon', type: 'quantitative'},\n        color: {field: 'Origin', type: 'nominal'},\n        shape: {field: 'Origin', type: 'nominal'}\n      }\n    });\n    model.parseLegends();\n\n    const legends = model.assembleLegends();\n    expect(legends).toHaveLength(1);\n\n    expect(legends[0].title).toEqual('Origin');\n    expect(legends[0].stroke).toEqual('color');\n    expect(legends[0].shape).toEqual('shape');\n  });\n\n  it('merges legend of the same field and favor symbol legend over gradient', () => {\n    const model = parseUnitModelWithScale({\n      data: {values: [{a: 'A', b: 28}, {a: 'B', b: 55}]},\n      mark: 'bar',\n      encoding: {\n        x: {field: 'a', type: 'ordinal'},\n        y: {field: 'b', type: 'quantitative'},\n        color: {field: 'b', type: 'quantitative'},\n        size: {field: 'b', type: 'quantitative'}\n      }\n    });\n\n    model.parseLegends();\n\n    const legends = model.assembleLegends();\n    expect(legends).toHaveLength(1);\n    expect(legends[0].title).toEqual('b');\n    expect(legends[0].fill).toEqual('color');\n    expect(legends[0].size).toEqual('size');\n    expect(legends[0].encode.symbols.update.fill).toBe(undefined);\n  });\n});\n"]}