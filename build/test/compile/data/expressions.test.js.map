{"version":3,"file":"expressions.test.js","sourceRoot":"","sources":["../../../../test/compile/data/expressions.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,kBAAkB,EAAC,MAAM,uCAAuC,CAAC;AAEzE,QAAQ,CAAC,0BAA0B,EAAE,GAAG,EAAE;IACxC,QAAQ,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAClC,EAAE,CAAC,wDAAwD,EAAE,GAAG,EAAE;YAChE,MAAM,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/E,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,yDAAyD,EAAE,GAAG,EAAE;YACjE,MAAM,CAAC,kBAAkB,CAAC,wBAAwB,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC/E,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oDAAoD,EAAE,GAAG,EAAE;YAC5D,MAAM,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;YACvE,MAAM,CAAC,kBAAkB,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import {getDependentFields} from '../../../src/compile/data/expressions';\n\ndescribe('compile/data/expressions', () => {\n  describe('getDependentFields', () => {\n    it('calcuates right dependent fields for simple expression', () => {\n      expect(getDependentFields('datum.x + datum.y')).toEqual(new Set(['x', 'y']));\n    });\n\n    it('calcuates right dependent fields for complex expression', () => {\n      expect(getDependentFields('toString(datum.x) + 12')).toEqual(new Set(['x']));\n    });\n\n    it('calculates right dependent fields for nested field', () => {\n      expect(getDependentFields('datum.x.y')).toEqual(new Set(['x', 'x.y']));\n      expect(getDependentFields('datum[\"x.y\"]')).toEqual(new Set(['x.y']));\n    });\n  });\n});\n"]}