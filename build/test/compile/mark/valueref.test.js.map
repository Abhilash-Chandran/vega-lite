{"version":3,"file":"valueref.test.js","sourceRoot":"","sources":["../../../../test/compile/mark/valueref.test.ts"],"names":[],"mappings":"AAAA,8BAA8B;AAC9B,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAC,MAAM,oCAAoC,CAAC;AAIvE,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACrC,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE;QACzB,MAAM,OAAO,GAAY;YACvB,IAAI,EAAE,OAAO;YACb,QAAQ,EAAE,GAAG;SACd,CAAC;QACF,EAAE,CAAC,6DAA6D,EAAE,GAAG,EAAE;YACrE,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,oFAAoF,EAAE,GAAG,EAAE;YAC5F,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE;QAC1B,EAAE,CAAC,uCAAuC,EAAE,GAAG,EAAE;YAC/C,MAAM,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAC,KAAK,EAAE,OAAO,EAAC,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;YACnG,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAC,KAAK,EAAE,EAAC,KAAK,EAAE,OAAO,EAAC,EAAC,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,wCAAwC,EAAE,GAAG,EAAE;YAChD,MAAM,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAC,KAAK,EAAE,QAAQ,EAAC,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;YACpG,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAC,KAAK,EAAE,EAAC,KAAK,EAAE,QAAQ,EAAC,EAAC,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;QACH,EAAE,CAAC,6CAA6C,EAAE,GAAG,EAAE;YACrD,MAAM,QAAQ,GAA0B,EAAC,KAAK,EAAE,WAAW,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,cAAc,EAAC,CAAC;YAClG,MAAM,SAAS,GAA0B,EAAC,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,cAAc,EAAC,CAAC;YAClF,MAAM,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;YACrF,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAC,MAAM,EAAE,yDAAyD,EAAC,CAAC,CAAC;QAC3F,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* tslint:disable:quotemark */\nimport {getOffset, midPoint} from '../../../src/compile/mark/valueref';\nimport {TypedFieldDef} from '../../../src/fielddef';\nimport {MarkDef} from '../../../src/mark';\n\ndescribe('compile/mark/valueref', () => {\n  describe('getOffset', () => {\n    const markDef: MarkDef = {\n      type: 'point',\n      x2Offset: 100\n    };\n    it('should correctly get the offset value for the given channel', () => {\n      expect(getOffset('x2', markDef)).toEqual(100);\n    });\n    it('should return undefined when the offset value for the given channel is not defined', () => {\n      expect(getOffset('x', markDef)).toEqual(undefined);\n    });\n  });\n\n  describe('midPoint()', () => {\n    it('should return correct value for width', () => {\n      const ref = midPoint('x', {value: 'width'}, undefined, undefined, undefined, undefined, undefined);\n      expect(ref).toEqual({field: {group: 'width'}});\n    });\n    it('should return correct value for height', () => {\n      const ref = midPoint('y', {value: 'height'}, undefined, undefined, undefined, undefined, undefined);\n      expect(ref).toEqual({field: {group: 'height'}});\n    });\n    it('should return correct value for binned data', () => {\n      const fieldDef: TypedFieldDef<string> = {field: 'bin_start', bin: 'binned', type: 'quantitative'};\n      const fieldDef2: TypedFieldDef<string> = {field: 'bin_end', type: 'quantitative'};\n      const ref = midPoint('x', fieldDef, fieldDef2, 'x', undefined, undefined, undefined);\n      expect(ref).toEqual({signal: 'scale(\"x\", (datum[\"bin_start\"] + datum[\"bin_end\"]) / 2)'});\n    });\n  });\n});\n"]}