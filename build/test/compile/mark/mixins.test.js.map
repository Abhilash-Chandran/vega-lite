{"version":3,"file":"mixins.test.js","sourceRoot":"","sources":["../../../../test/compile/mark/mixins.test.ts"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable:quotemark */\n\nimport {assert} from 'chai';\nimport {X, Y} from '../../../src/channel';\nimport {binPosition, color, nonPosition, pointPosition, tooltip} from '../../../src/compile/mark/mixins';\nimport {FieldDef} from '../../../src/fielddef';\nimport * as log from '../../../src/log';\nimport {parseUnitModelWithScaleAndLayoutSize} from '../../util';\n\ndescribe('compile/mark/mixins', () => {\n  describe('color()', () => {\n    it('color should be mapped to fill for bar', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'bar',\n        encoding: {\n          x: {\n            field: 'gender',\n            type: 'nominal',\n            scale: {rangeStep: 6},\n            axis: null\n          },\n          color: {\n            field: 'gender',\n            type: 'nominal',\n            scale: {range: ['#EA98D2', '#659CCA']}\n          }\n        },\n        data: {url: 'data/population.json'}\n      });\n\n      const colorMixins = color(model);\n      assert.deepEqual(colorMixins.fill, {field: 'gender', scale: 'color'});\n    });\n\n    it('color should be mapped to stroke for point', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'gender',\n            type: 'nominal',\n            scale: {rangeStep: 6},\n            axis: null\n          },\n          color: {\n            field: 'gender',\n            type: 'nominal',\n            scale: {range: ['#EA98D2', '#659CCA']}\n          }\n        },\n        data: {url: 'data/population.json'}\n      });\n\n      const colorMixins = color(model);\n      assert.deepEqual(colorMixins.stroke, {field: 'gender', scale: 'color'});\n      assert.propertyVal(colorMixins.fill, 'value', 'transparent');\n    });\n\n    it('add transparent fill when stroke is encoded', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'gender',\n            type: 'nominal',\n            scale: {rangeStep: 6},\n            axis: null\n          },\n          stroke: {\n            field: 'gender',\n            type: 'nominal',\n            scale: {range: ['#EA98D2', '#659CCA']}\n          }\n        },\n        data: {url: 'data/population.json'}\n      });\n\n      const colorMixins = color(model);\n      assert.deepEqual(colorMixins.stroke, {field: 'gender', scale: 'stroke'});\n      assert.propertyVal(colorMixins.fill, 'value', 'transparent');\n    });\n\n    it(\n      'ignores color if fill is specified',\n      log.wrap(logger => {\n        const model = parseUnitModelWithScaleAndLayoutSize({\n          mark: 'point',\n          encoding: {\n            x: {\n              field: 'gender',\n              type: 'nominal',\n              scale: {rangeStep: 6},\n              axis: null\n            },\n            fill: {\n              field: 'gender',\n              type: 'nominal',\n              scale: {range: ['#EA98D2', '#659CCA']}\n            },\n            color: {\n              field: 'gender',\n              type: 'nominal',\n              scale: {range: ['#EA98D2', '#659CCA']}\n            }\n          },\n          data: {url: 'data/population.json'}\n        });\n\n        const colorMixins = color(model);\n        assert.isUndefined(colorMixins.stroke);\n        assert.deepEqual(colorMixins.fill, {field: 'gender', scale: 'fill'});\n        assert.equal(logger.warns[0], log.message.droppingColor('encoding', {fill: true}));\n      })\n    );\n\n    it(\n      'ignores color property if fill is specified',\n      log.wrap(logger => {\n        const model = parseUnitModelWithScaleAndLayoutSize({\n          mark: {type: 'point', color: 'red'},\n          encoding: {\n            x: {\n              field: 'gender',\n              type: 'nominal',\n              scale: {rangeStep: 6},\n              axis: null\n            },\n            fill: {\n              field: 'gender',\n              type: 'nominal',\n              scale: {range: ['#EA98D2', '#659CCA']}\n            }\n          },\n          data: {url: 'data/population.json'}\n        });\n\n        const colorMixins = color(model);\n        assert.isUndefined(colorMixins.stroke);\n        assert.deepEqual(colorMixins.fill, {field: 'gender', scale: 'fill'});\n        assert.equal(logger.warns[0], log.message.droppingColor('property', {fill: true}));\n      })\n    );\n\n    it(\n      'should apply stroke property over color property',\n      log.wrap(logger => {\n        const model = parseUnitModelWithScaleAndLayoutSize({\n          mark: {type: 'point', color: 'red', stroke: 'blue'},\n          encoding: {\n            x: {field: 'Horsepower', type: 'quantitative'},\n            y: {field: 'Miles_per_Gallon', type: 'quantitative'}\n          }\n        });\n        const props = color(model);\n        assert.deepEqual(props.stroke, {value: 'blue'});\n        assert.equal(logger.warns[0], log.message.droppingColor('property', {stroke: true}));\n      })\n    );\n\n    it(\n      'should apply ignore color property when fill is specified',\n      log.wrap(logger => {\n        const model = parseUnitModelWithScaleAndLayoutSize({\n          mark: {type: 'point', color: 'red', fill: 'blue'},\n          encoding: {\n            x: {field: 'Horsepower', type: 'quantitative'},\n            y: {field: 'Miles_per_Gallon', type: 'quantitative'}\n          }\n        });\n        const props = color(model);\n        assert.isUndefined(props.stroke);\n        assert.equal(logger.warns[0], log.message.droppingColor('property', {fill: true}));\n      })\n    );\n\n    it('should apply color property', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: {type: 'point', color: 'red'},\n        encoding: {\n          x: {field: 'Horsepower', type: 'quantitative'},\n          y: {field: 'Miles_per_Gallon', type: 'quantitative'}\n        }\n      });\n      const props = color(model);\n      assert.deepEqual(props.stroke, {value: 'red'});\n    });\n\n    it('should apply color from mark-specific config over general mark config', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          x: {field: 'Horsepower', type: 'quantitative'},\n          y: {field: 'Miles_per_Gallon', type: 'quantitative'}\n        },\n        config: {mark: {color: 'blue'}, point: {color: 'red'}}\n      });\n      const props = color(model);\n      assert.deepEqual(props.stroke, {value: 'red'});\n    });\n\n    it('should apply stroke mark config over color mark config', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          x: {field: 'Horsepower', type: 'quantitative'},\n          y: {field: 'Miles_per_Gallon', type: 'quantitative'}\n        },\n        config: {mark: {color: 'red', stroke: 'blue'}}\n      });\n      const props = color(model);\n      assert.deepEqual(props.stroke, {value: 'blue'});\n    });\n\n    it('should apply stroke mark config over color mark config', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          x: {field: 'Horsepower', type: 'quantitative'},\n          y: {field: 'Miles_per_Gallon', type: 'quantitative'}\n        },\n        config: {point: {color: 'red', stroke: 'blue'}}\n      });\n      const props = color(model);\n      assert.deepEqual(props.stroke, {value: 'blue'});\n    });\n  });\n\n  describe('tooltip()', () => {\n    it('generates tooltip object signal for an array of tooltip fields', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          tooltip: [{field: 'Horsepower', type: 'quantitative'}, {field: 'Acceleration', type: 'quantitative'}]\n        }\n      });\n      const props = tooltip(model);\n      assert.deepEqual(props.tooltip, {\n        signal: '{\"Horsepower\": format(datum[\"Horsepower\"], \"\"), \"Acceleration\": format(datum[\"Acceleration\"], \"\")}'\n      });\n    });\n\n    it('generates tooltip object signal for all encoding fields', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: 'point',\n        encoding: {\n          x: {field: 'Horsepower', type: 'quantitative'},\n          y: {field: 'Acceleration', type: 'quantitative'}\n        }\n      });\n      const props = tooltip(model);\n      assert.deepEqual(props.tooltip, {\n        signal: '{\"Horsepower\": format(datum[\"Horsepower\"], \"\"), \"Acceleration\": format(datum[\"Acceleration\"], \"\")}'\n      });\n    });\n\n    it('generates tooltip object signal for all data if specified', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: {type: 'point', tooltip: {content: 'data'}},\n        encoding: {\n          x: {field: 'Horsepower', type: 'quantitative'},\n          y: {field: 'Acceleration', type: 'quantitative'}\n        }\n      });\n      const props = tooltip(model);\n      assert.deepEqual(props.tooltip, {signal: 'datum'});\n    });\n\n    it('priorizes tooltip field def', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: {type: 'point', tooltip: {content: 'data'}},\n        encoding: {\n          x: {field: 'Cylinders', type: 'quantitative'},\n          y: {field: 'Displacement', type: 'quantitative'},\n          tooltip: [{field: 'Horsepower', type: 'quantitative'}, {field: 'Acceleration', type: 'quantitative'}]\n        }\n      });\n      const props = tooltip(model);\n      assert.deepEqual(props.tooltip, {\n        signal: '{\"Horsepower\": format(datum[\"Horsepower\"], \"\"), \"Acceleration\": format(datum[\"Acceleration\"], \"\")}'\n      });\n    });\n\n    it('priorizes tooltip value def', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: {type: 'point', tooltip: {content: 'data'}},\n        encoding: {\n          x: {field: 'Cylinders', type: 'quantitative'},\n          y: {field: 'Displacement', type: 'quantitative'},\n          tooltip: {value: 'haha'}\n        }\n      });\n      const props = tooltip(model);\n      assert.deepEqual(props.tooltip, {value: 'haha'});\n    });\n\n    it('generates correct keys and values for channels with axis', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: {type: 'point'},\n        encoding: {\n          x: {field: 'Date', type: 'quantitative', axis: {title: 'foo', format: '%y'}},\n          y: {field: 'Displacement', type: 'quantitative', axis: {title: 'bar'}}\n        }\n      });\n      const props = tooltip(model);\n      expect(props.tooltip).toEqual({\n        signal: '{\"foo\": format(datum[\"Date\"], \"%y\"), \"bar\": format(datum[\"Displacement\"], \"\")}'\n      });\n    });\n\n    it('generates correct keys and values for channels with legends', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        mark: {type: 'point'},\n        encoding: {\n          color: {field: 'Foobar', type: 'nominal', legend: {title: 'baz', format: 's'}}\n        }\n      });\n      const props = tooltip(model);\n      expect(props.tooltip).toEqual({\n        signal: '{\"baz\": \\'\\'+datum[\"Foobar\"]}'\n      });\n    });\n  });\n\n  describe('midPoint()', () => {\n    it('should return correctly for lat/lng', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        data: {\n          url: 'data/zipcodes.csv',\n          format: {\n            type: 'csv'\n          }\n        },\n        mark: 'point',\n        encoding: {\n          longitude: {\n            field: 'longitude',\n            type: 'quantitative'\n          },\n          latitude: {\n            field: 'latitude',\n            type: 'quantitative'\n          }\n        }\n      });\n\n      [X, Y].forEach(channel => {\n        const mixins = pointPosition(channel, model, 'zeroOrMin');\n        assert.equal(mixins[channel].field, model.getName(channel));\n      });\n    });\n  });\n\n  describe('nonPosition', () => {\n    it('respects default value for a particular channel', () => {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        data: {url: 'data/cars.json'},\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'Acceleration',\n            type: 'quantitative'\n          },\n          y: {\n            field: 'Horsepower',\n            type: 'quantitative'\n          }\n        }\n      });\n\n      const mixins = nonPosition('opacity', model);\n      expect(mixins.opacity).toEqual({value: 0.7});\n    });\n  });\n\n  describe('binPosition', () => {\n    it(\n      'generates warning for invalid binned spec without x2',\n      log.wrap(logger => {\n        const fieldDef: FieldDef<string> = {field: 'bin_start', bin: 'binned', type: 'quantitative'};\n        const props = binPosition(fieldDef, undefined, 'x', undefined, undefined, undefined);\n        assert.isUndefined(props);\n        assert.equal(logger.warns[0], log.message.channelRequiredForBinned('x2'));\n      })\n    );\n\n    it(\n      'generates warning for invalid binned spec without y2',\n      log.wrap(logger => {\n        const fieldDef: FieldDef<string> = {field: 'bin_start', bin: 'binned', type: 'quantitative'};\n        const props = binPosition(fieldDef, undefined, 'y', undefined, undefined, undefined);\n        assert.isUndefined(props);\n        assert.equal(logger.warns[0], log.message.channelRequiredForBinned('y2'));\n      })\n    );\n  });\n});\n"]}