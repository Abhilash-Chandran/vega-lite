{"version":3,"file":"parse.test.js","sourceRoot":"","sources":["../../../../test/compile/axis/parse.test.ts"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable:quotemark */\n\nimport {Y} from '../../../src/channel';\nimport {parseLayerAxes, parseUnitAxes} from '../../../src/compile/axis/parse';\nimport {parseLayerModel, parseUnitModelWithScale} from '../../util';\n\ndescribe('Axis', () => {\n  // TODO: move this to model.test.ts\n  describe('= true', () => {\n    it('should produce default properties for axis', () => {\n      const model1 = parseUnitModelWithScale({\n        mark: 'bar',\n        encoding: {\n          y: {type: 'quantitative', field: 'US_Gross', aggregate: 'sum'}\n        },\n        data: {url: 'data/movies.json'}\n      });\n\n      const model2 = parseUnitModelWithScale({\n        mark: 'bar',\n        encoding: {\n          y: {type: 'quantitative', field: 'US_Gross', aggregate: 'sum'}\n        },\n        data: {url: 'data/movies.json'}\n      });\n      expect(model1.axis(Y)).toEqual(model2.axis(Y));\n    });\n  });\n  describe('parseUnitAxis', () => {\n    it('should produce Vega grid', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative',\n            axis: {grid: true, gridColor: 'blue', gridWidth: 20}\n          }\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.grid).toEqual(true);\n    });\n\n    it('should produce Vega grid when axis config is specified.', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative'\n          }\n        },\n        config: {axisX: {grid: true}}\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].implicit.grid).toEqual(true);\n    });\n\n    it('should produce axis component with grid=false', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative',\n            axis: {grid: false, gridColor: 'blue', gridWidth: 20}\n          }\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.grid).toEqual(false);\n    });\n\n    it('should ignore null scales', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          longitude: {\n            field: 'a',\n            type: 'quantitative'\n          },\n          latitude: {\n            field: 'b',\n            type: 'quantitative'\n          }\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x']).not.toBeDefined();\n      expect(axisComponent['y']).not.toBeDefined();\n    });\n\n    it('should produce Vega grid axis = undefined axis if grid is disabled via config.axisX', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative'\n          }\n        },\n        config: {axisX: {grid: false}}\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.grid).toEqual(undefined);\n    });\n\n    it('should produce Vega grid axis = undefined axis if grid is disabled via config.axis', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative'\n          }\n        },\n        config: {axis: {grid: false}}\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.grid).toEqual(undefined);\n    });\n\n    it('should store the title value if title = null, \"\", or false', () => {\n      for (const val of [null, '', false]) {\n        const model = parseUnitModelWithScale({\n          mark: 'point',\n          encoding: {\n            x: {\n              field: 'a',\n              type: 'quantitative',\n              axis: {title: val as any} // Need to cast as false is not valid, but we want to fall back gracefully\n            }\n          }\n        });\n        const axisComponent = parseUnitAxes(model);\n        expect(axisComponent['x'].length).toEqual(1);\n        expect(axisComponent['x'][0].explicit.title).toEqual(val as any);\n      }\n    });\n\n    it('should store the fieldDef title value if title = null, \"\", or false', () => {\n      for (const val of [null, '', false]) {\n        const model = parseUnitModelWithScale({\n          mark: 'point',\n          encoding: {\n            x: {\n              field: 'a',\n              type: 'quantitative',\n              title: val as any // Need to cast as false is not valid, but we want to fall back gracefully\n            }\n          }\n        });\n        const axisComponent = parseUnitAxes(model);\n        expect(axisComponent['x'].length).toEqual(1);\n        expect(axisComponent['x'][0].explicit.title).toEqual(val as any);\n      }\n    });\n\n    it('should store fieldDef.title as explicit', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'point',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative',\n            title: 'foo'\n          }\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.title).toEqual('foo');\n    });\n\n    it('should merge title of fieldDef and fieldDef2', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'bar',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative',\n            title: 'foo'\n          },\n          x2: {\n            field: 'b',\n            type: 'quantitative',\n            title: 'bar'\n          }\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.title).toEqual('foo, bar');\n    });\n\n    it('should use title of fieldDef2', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'bar',\n        encoding: {\n          x: {\n            field: 'a',\n            type: 'quantitative'\n          },\n          x2: {\n            field: 'b',\n            type: 'quantitative',\n            title: 'bar'\n          }\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].explicit.title).toEqual('bar');\n    });\n\n    it('should store both x and x2 for ranged mark', () => {\n      const model = parseUnitModelWithScale({\n        mark: 'rule',\n        encoding: {\n          x: {field: 'a', type: 'quantitative'},\n          x2: {field: 'a2', type: 'quantitative'}\n        }\n      });\n      const axisComponent = parseUnitAxes(model);\n      expect(axisComponent['x'].length).toEqual(1);\n      expect(axisComponent['x'][0].get('title')).toEqual([{field: 'a'}, {field: 'a2'}]);\n    });\n  });\n\n  describe('parseLayerAxis', () => {\n    const globalRuleOverlay = parseLayerModel({\n      layer: [\n        {\n          mark: 'rule',\n          encoding: {\n            y: {\n              aggregate: 'mean',\n              field: 'a',\n              type: 'quantitative'\n            }\n          }\n        },\n        {\n          mark: 'line',\n          encoding: {\n            y: {\n              aggregate: 'mean',\n              field: 'a',\n              type: 'quantitative'\n            },\n            x: {\n              timeUnit: 'month',\n              type: 'temporal',\n              field: 'date'\n            }\n          }\n        }\n      ]\n    });\n    globalRuleOverlay.parseScale();\n    globalRuleOverlay.parseLayoutSize();\n    parseLayerAxes(globalRuleOverlay);\n\n    it('correctly merges gridScale if one layer does not have one of the axis', () => {\n      const axisComponents = globalRuleOverlay.component.axes;\n      expect(axisComponents.y.length).toEqual(1);\n      expect(axisComponents.y[0].get('gridScale')).toEqual('x');\n    });\n\n    it('correctly merges similar title', () => {\n      const axisComponents = globalRuleOverlay.component.axes;\n      expect(axisComponents.y[0].get('title')).toEqual([{aggregate: 'mean', field: 'a'}]);\n    });\n\n    it('correctly combines different title', () => {\n      const model = parseLayerModel({\n        $schema: 'https://vega.github.io/schema/vega-lite/v3.json',\n        data: {url: 'data/cars.json'},\n        layer: [\n          {\n            mark: 'line',\n            encoding: {\n              x: {field: 'Cylinders', type: 'ordinal'},\n              y: {\n                aggregate: 'max',\n                field: 'Horsepower',\n                type: 'quantitative'\n              },\n              color: {value: 'darkred'}\n            }\n          },\n          {\n            data: {url: 'data/cars.json'},\n            mark: 'line',\n            encoding: {\n              x: {field: 'Cylinders', type: 'ordinal'},\n              y: {\n                aggregate: 'min',\n                field: 'Horsepower',\n                type: 'quantitative'\n              }\n            }\n          }\n        ]\n      });\n      model.parseScale();\n      parseLayerAxes(model);\n      const axisComponents = model.component.axes;\n\n      expect(axisComponents.y[0].get('title')).toEqual([\n        {aggregate: 'max', field: 'Horsepower'},\n        {aggregate: 'min', field: 'Horsepower'}\n      ]);\n    });\n  });\n});\n"]}