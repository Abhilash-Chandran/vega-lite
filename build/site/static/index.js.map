{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../site/static/index.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-ignore\nimport hljs from 'highlight.js/lib/highlight';\n// @ts-ignore\nimport css from 'highlight.js/lib/languages/css';\n// @ts-ignore\nimport diff from 'highlight.js/lib/languages/diff';\n// @ts-ignore\nimport javascript from 'highlight.js/lib/languages/javascript';\n// @ts-ignore\nimport json from 'highlight.js/lib/languages/json';\n// @ts-ignore\nimport xml from 'highlight.js/lib/languages/xml';\n\nimport {event, select, selectAll, Selection} from 'd3-selection';\nimport compactStringify from 'json-stringify-pretty-compact';\nimport * as vega from 'vega';\nimport {Handler} from 'vega-tooltip';\nimport {compile, TopLevelSpec} from '../../src';\nimport {post} from './post';\nimport {runStreamingExample} from './streaming';\n\nwindow['runStreamingExample'] = runStreamingExample;\nwindow['embedExample'] = embedExample;\n\nhljs.registerLanguage('javascript', javascript);\nhljs.registerLanguage('json', json);\nhljs.registerLanguage('html', xml);\nhljs.registerLanguage('css', css);\nhljs.registerLanguage('diff', diff);\n\n// highlight jekyll code blocks\nhljs.initHighlightingOnLoad();\n\ndeclare const BASEURL: string;\n\nconst loader = vega.loader({\n  baseURL: BASEURL\n});\n\nconst editorURL = 'https://vega.github.io/editor/';\n\n/* Anchors */\nselectAll('h2, h3, h4, h5, h6').each(function(this: d3.BaseType) {\n  const sel = select(this);\n  const name = sel.attr('id');\n  const title = sel.text();\n  sel.html(`<a href=\"#${name}\" class=\"anchor\"><span class=\"octicon octicon-link\"></span></a>${title.trim()}`);\n});\n\n/* Documentation */\nfunction renderExample($target: Selection<any, any, any, any>, specText: string) {\n  $target.classed('example', true);\n  $target.text('');\n\n  const vis = $target.append('div').attr('class', 'example-vis');\n\n  // Decrease visual noise by removing $schema and description from code examples.\n  const textClean = specText.replace(/(\\s)+\"(\\$schema|description)\": \".*?\",/g, '');\n  const code = $target\n    .append('pre')\n    .attr('class', 'example-code')\n    .append('code')\n    .attr('class', 'json')\n    .text(textClean);\n  hljs.highlightBlock(code.node() as any);\n\n  const spec = JSON.parse(specText);\n\n  embedExample(vis.node(), spec, true, !$target.classed('no-tooltip'));\n}\n\nexport function embedExample($target: any, spec: TopLevelSpec, actions = true, tooltip = true) {\n  const vgSpec = compile(spec).spec;\n\n  const view = new vega.View(vega.parse(vgSpec), {loader: loader}).renderer('svg').initialize($target);\n\n  if (tooltip) {\n    const handler = new Handler().call;\n    view.tooltip(handler);\n  }\n\n  view.run();\n\n  if (actions) {\n    select($target)\n      .append('div')\n      .attr('class', 'vega-actions')\n      .append('a')\n      .text('Open in Vega Editor')\n      .attr('href', '#')\n      .on('click', function() {\n        post(window, editorURL, {\n          mode: 'vega-lite',\n          spec: compactStringify(spec),\n          config: vgSpec.config,\n          renderer: 'svg'\n        });\n        event.preventDefault();\n      });\n  }\n\n  return view;\n}\n\nfunction getSpec(el: d3.BaseType) {\n  const sel = select(el);\n  const name = sel.attr('data-name');\n  if (name) {\n    const dir = sel.attr('data-dir');\n    const fullUrl = BASEURL + '/examples/specs/' + (dir ? dir + '/' : '') + name + '.vl.json';\n\n    fetch(fullUrl)\n      .then(response => {\n        response\n          .text()\n          .then(spec => {\n            renderExample(sel, spec);\n          })\n          .catch(console.error);\n      })\n      .catch(console.error);\n  } else {\n    console.error('No \"data-name\" specified to import examples from');\n  }\n}\n\nwindow['changeSpec'] = (elId: string, newSpec: string) => {\n  const el = document.getElementById(elId);\n  select(el).attr('data-name', newSpec);\n  getSpec(el);\n};\n\nwindow['buildSpecOpts'] = (id: string, baseName: string) => {\n  const oldName = select('#' + id).attr('data-name');\n  const prefixSel = select('select[name=' + id + ']');\n  const inputsSel = selectAll('input[name=' + id + ']:checked');\n  const prefix = prefixSel.empty() ? id : prefixSel.property('value');\n  const values = inputsSel\n    .nodes()\n    .map((n: any) => n.value)\n    .sort()\n    .join('_');\n  const newName = baseName + prefix + (values ? '_' + values : '');\n  if (oldName !== newName) {\n    window['changeSpec'](id, newName);\n  }\n};\n\nselectAll('.vl-example').each(function(this: d3.BaseType) {\n  getSpec(this);\n});\n\n// caroussel for the front page\n// adapted from https://codepen.io/LANparty/pen/wePYXb\n\nconst carousel = document.getElementById('carousel');\n\nfunction carouselHide(slides: NodeListOf<any>, indicators: NodeListOf<any>, links: NodeListOf<any>, active: number) {\n  indicators[active].setAttribute('data-state', '');\n  links[active].setAttribute('data-state', '');\n  slides[active].setAttribute('data-state', '');\n  slides[active].style.display = 'none';\n\n  const video = slides[active].querySelector('video');\n  if (video) {\n    video.pause();\n  }\n}\n\nfunction carouselShow(slides: NodeListOf<any>, indicators: NodeListOf<any>, links: NodeListOf<any>, active: number) {\n  indicators[active].checked = true;\n  indicators[active].setAttribute('data-state', 'active');\n  links[active].setAttribute('data-state', 'active');\n  slides[active].setAttribute('data-state', 'active');\n\n  const video = slides[active].querySelector('video');\n  if (video) {\n    video.currentTime = 0;\n    slides[active].style.display = 'block';\n    video.play();\n  } else {\n    slides[active].style.display = 'block';\n  }\n}\n\nfunction setSlide(\n  slides: NodeListOf<Element>,\n  indicators: NodeListOf<Element>,\n  links: NodeListOf<any>,\n  active: number\n) {\n  return () => {\n    // Reset all slides\n    for (const [i, indicator] of indicators.entries()) {\n      indicator.setAttribute('data-state', '');\n      slides[i].setAttribute('data-state', '');\n      carouselHide(slides, indicators, links, i);\n    }\n\n    // Set defined slide as active\n    indicators[active].setAttribute('data-state', 'active');\n    slides[active].setAttribute('data-state', 'active');\n    carouselShow(slides, indicators, links, active);\n\n    // Switch button text\n    const numSlides = carousel.querySelectorAll('.indicator').length;\n    if (numSlides === active + 1) {\n      carousel.querySelector('.next-slide').textContent = 'Start over';\n    } else {\n      carousel.querySelector('.next-slide').textContent = 'Next step';\n    }\n  };\n}\n\nif (carousel) {\n  const slides = carousel.querySelectorAll('.slide');\n  const indicators = carousel.querySelectorAll('.indicator');\n  const links = carousel.querySelectorAll('.slide-nav');\n\n  for (const indicator of indicators) {\n    indicator.addEventListener('click', setSlide(slides, indicators, links, +indicator.getAttribute('data-slide')));\n  }\n\n  for (const link of links) {\n    link.addEventListener('click', setSlide(slides, indicators, links, +link.getAttribute('data-slide')));\n  }\n\n  carousel.querySelector('.next-slide').addEventListener('click', () => {\n    const slide = +carousel.querySelector('.indicator[data-state=active]').getAttribute('data-slide');\n    const numSlides = carousel.querySelectorAll('.indicator').length;\n    setSlide(slides, indicators, links, (slide + 1) % numSlides)();\n  });\n\n  [].forEach.call(slides, (slide: Element) => {\n    const video = slide.querySelector('video');\n    if (video) {\n      video.addEventListener('mouseover', () => {\n        (slide.querySelector('.example-vis') as any).style.visibility = 'visible';\n        video.style.display = 'none';\n        video.pause();\n      });\n    }\n  });\n}\n"]}